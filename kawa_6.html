<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from /home/bothner/Kawa/kawa/doc/kawa.texi on 26 June 2000 -->

<TITLE>Kawa, the Java-based Scheme system - Features of R5RS not implemented</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="kawa_1.html">first</A>, <A HREF="kawa_5.html">previous</A>, <A HREF="kawa_7.html">next</A>, <A HREF="kawa_15.html">last</A> section, <A HREF="kawa_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC13" HREF="kawa_toc.html#TOC13">Features of R5RS not implemented</A></H1>

<P>
Kawa implements all the required and optional features of R5RS,
with the following exceptions.


<P>
The entire "numeric tower" is implemented.
However, some transcendental function only work on reals.
Integral function do not necessarily work on
inexact (floating-point) integers.
(The whole idea of "inexact integer" in R5RS seems rather pointless ...)


<P>
Also, <CODE>call-with-current-continuation</CODE> is only "upwards" (?).
I.e. once a continuation has been exited, it cannot be invoked.
These restricted continuations can be used to implement catch/throw
(such as the examples in R4RS), but not co-routines or backtracking.


<P>
Kawa now does general tail-call elimination, but only if
you use the flag <CODE>--full-tail-calls</CODE>.  (Currently, the
<CODE>eval</CODE> function itself is not fully tail-recursive, in violation
of R5RS.)   The <CODE>--full-tail-calls</CODE> flag is not on by default,
partly because it is noticably slower (though I have not measured how
much), and partly I think it is more useful for Kawa to be compilatible
with standard Java calling conventions and tools.
Code compiled with <CODE>--full-tail-calls</CODE> can call code
 compiled without it and vice versa.


<P>
Even without <CODE>--full-tail-calls</CODE>, if the
compiler can prove that the procedure being called is the current
function, then the tail call will be replaced by a jump.
This means the procedure must be defined using a letrec, not a
define (because the compiler does not know if someone might
re-define a global definition), and there must be no assignments
(using <CODE>set!</CODE>) to the procedure binding.


<P><HR><P>
Go to the <A HREF="kawa_1.html">first</A>, <A HREF="kawa_5.html">previous</A>, <A HREF="kawa_7.html">next</A>, <A HREF="kawa_15.html">last</A> section, <A HREF="kawa_toc.html">table of contents</A>.
</BODY>
</HTML>
