<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from /home/bothner/Kawa/kawa/doc/kawa.texi on 26 June 2000 -->

<TITLE>Kawa, the Java-based Scheme system - Building and installing Kawa</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="kawa_1.html">first</A>, <A HREF="kawa_3.html">previous</A>, <A HREF="kawa_5.html">next</A>, <A HREF="kawa_15.html">last</A> section, <A HREF="kawa_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC4" HREF="kawa_toc.html#TOC4">Building and installing Kawa</A></H1>

<P>
Before installing Kawa, you must have Java working on your
system.


<P>
You can compile Kawa from the source distribution.
Alternatively, you can install the pre-compiled binary distribution.



<UL>
<LI><A HREF="kawa_4.html#SEC5">Running Java</A>: Getting and running Java
<LI><A HREF="kawa_4.html#SEC6">Binary distribution</A>: Installing and using the binary distribution
<LI><A HREF="kawa_4.html#SEC7">Source distribution</A>: Installing and using the source distribution
</UL>



<H2><A NAME="SEC5" HREF="kawa_toc.html#TOC5">Getting and running Java</A></H2>

<P>
You will need a working Java system.
The discussion below assumes you are using the Java Developer's Kit
(JDK) version 1.1.x from JavaSoft (Sun).
(Kawa has also been reported to work with Kaffe, Symantec Cafe, J++,
and JDK 1.2beta.)
You can download free copies of
<a href="http://java.sun.com/products/jdk/1.1/index.html">
JDK 1.1.x
</a>
for various platforms.


<P>
If you want to run Kawa on a Macintosh, see
<A HREF="http://home.earthlink.net/~athene/2/scheme/mackawa.html">http://home.earthlink.net/~athene/2/scheme/mackawa.html</A>.


<P>
The program <CODE>java</CODE> is the Java interpreter.
The program <CODE>javac</CODE> is the Java compiler,
and is needed if you want to compile the source release yourself.
Both programs must be in your <CODE>PATH</CODE>.


<P>
You also need to set <CODE>CLASSPATH</CODE> so it includes both the
current directory, and the standard Java library.
After you have installed Kawa, the <CODE>CLASSPATH</CODE> needs to
include wherever you installed Kawa.


<P>
If you have the JDK in directory <CODE>$JDK</CODE>,
and you are using a Bourne-shell compatible shell
(/bin/sh, ksh, bash, and some others) you can set both variables thus:

<PRE>
PATH=$JDK/bin:$PATH
CLASSPATH=.:$JDK/lib/classes.zip
export PATH CLASSPATH
</PRE>



<H2><A NAME="SEC6" HREF="kawa_toc.html#TOC6">Installing and using the binary distribution</A></H2>

<P>
The binary release includes only the binary compiled <SAMP>`.class'</SAMP>
versions of the same <SAMP>`.java'</SAMP> source files in the source release.
It does not include any documentation, so you probably want the
source release in addition to the binary release.  The purpose
of the binary release is just to save you time and trouble of
compiling the sources.


<P>
The binary release comes as a <CODE>.jar</CODE> archive
<SAMP>`kawa-1.6.70-compiled.jar'</SAMP>.


<P>
You can unzip the archive, or you can use it as is.
Assuming the latter, copy the archive to some suitable location,
such as <CODE>/usr/local/lib/kawa-compiled.jar</CODE>.


<P>
Then, before you can actually run Kawa, you need to set <CODE>CLASSPATH</CODE>
so it includes the Kawa archive.  On Unix, using a Bourne-style shell:

<PRE>
CLASSPATH=/usr/local/lib/kawa-compiled.jar
export CLASSPATH
</PRE>

<P>
On Windows95/WindowsNT, you need to set <CODE>classpath</CODE> in a DOS console.
For example:

<PRE>
set classpath=\kawa\kawa-1.6.70-compiled.jar
</PRE>

<P>
Then to run Kawa do:

<PRE>
java kawa.repl
</PRE>

<P>
To run Kawa in a fresh window, you can do:

<PRE>
java kawa.repl -w
</PRE>

<P>
On Windows, you probably do want to use the <CODE>-w</CODE> flag,
because if you run Kawa under the MS-DOS prompt, you won't see
commands echoed until you hit Enter.  (If anyone knows a way
to fix this problem, please let me know.)




<H2><A NAME="SEC7" HREF="kawa_toc.html#TOC7">Installing and using the source distribution</A></H2>
<P>
The Kawa release normally comes as a gzip-compressed tar file named
<SAMP>`kawa-1.6.70.tar.gz'</SAMP> .


<P>
In your build directory do:

<PRE>
tar xzf kawa-1.6.70.tar.gz
cd kawa-1.6.70
</PRE>

<P>
Then you must configure the sources.  This you can do
the same way you configure most other GNU software.  Normally
you can just run the configure script with no arguments:



<PRE>
./configure
</PRE>

<P>
This will specify that a later <CODE>make install</CODE> will install the
compiled <SAMP>`.class'</SAMP> files into <CODE>/usr/local/share/java</CODE>.
If you want them
to be installed someplace else, such as <CODE>$PREFIX/share/java</CODE>, then
specify that when you run configure:

<PRE>
./configure --prefix $PREFIX
</PRE>

<P>
If you have the GNU <SAMP>`readline'</SAMP> library installed, you might try
adding the <SAMP>`--enable-kawa-frontend'</SAMP> flag.  This will build the
<SAMP>`kawa'</SAMP> front-end program, which provides input-line editing
and an input history.  You can get <SAMP>`readline'</SAMP> from archives
of GNU programs, including <A HREF="ftp://www.gnu.org/">ftp://www.gnu.org/</A>.


<P>
If you have installed Kawa before, make sure your <CODE>CLASSPATH</CODE>
does not include old versions of Kawa, or other classes that may
conflict with the new ones.


<P>
Thus you need to compile all the .java source files.
Just run make:

<PRE>
make
</PRE>

<P>
This assumes that <SAMP>`java'</SAMP> and <SAMP>`javac'</SAMP> are the java interpreter
and compiler, respectively.
For example, if you are using the Kaffe Java interpreter,
you need to instead say:

<PRE>
make JAVA=kaffe
</PRE>

<P>
You can now test the system by running Kawa in place:

<PRE>
java kawa.repl
</PRE>

<P>
or you can run the test suite:

<PRE>
(cd testsuite;  make check)
</PRE>

<P>
or you can install the compiled files:

<PRE>
make install
</PRE>

<P>
This will install your classes into <CODE>$PREFIX/share/java</CODE> (and its
sub-directories).  Here <CODE>$PREFIX</CODE> is the directory you specified
to configure with the <CODE>--prefix</CODE> option, or <CODE>/usr/local</CODE> if you
did not specify a <CODE>--prefix</CODE> option.


<P>
To use the installed files, you need to set <CODE>CLASSPATH</CODE> so
that <CODE>$PREFIX/share/java</CODE> is on the path:

<PRE>
CLASSPATH=$PREFIX/share/java
export CLASSPATH
</PRE>

<P>
This is done automatically if you use the <SAMP>`kawa'</SAMP> script.




<H3><A NAME="SEC8" HREF="kawa_toc.html#TOC8">Building Kawa under Windows</A></H3>

<P>
The Kawa <CODE>configure</CODE> and <CODE>make</CODE> process assumes a Unix-like
environment.  If you want to build Kawa from source under Windows
(95, 98, or NT), you could use a Unix empulation package, such
as the free <A HREF="http://sourceware.cygnus.com/cygwin/">Cygwin</A>.
However, there are some problems with filenames that make this
more complicated than it should be.


<P>
The Kawa source distribution now includes a simple batch file for building
Kawa under Windows.  You can do the following:



<OL>
<LI>

Download the Kawa source distribution <CODE>kawa-1.6.70.tar.gz</CODE>.
<LI>

Extract the files using an appropriate tool.
(I did <CODE>tar xzf kawa-1.6.70.tar.gz</CODE>, using the <CODE>tar</CODE>
that is part of <A HREF="http://sourceware.cygnus.com/cygwin/">Cygwin</A>.
If there are alternative commonly-available tools, please let me
know about them.)
<LI>

In an MS-DOS window, <CODE>cd kawa-1.6.70</CODE>.
<LI>

Edit <CODE>makekawa.bat</CODE> if need be to specify the location of your Java tools.
<LI>

Execute <CODE>makekawa.bat</CODE>.
<LI>

If this succeeded, you should have a working kawa.
For example you can do <CODE>java kawa.repl -w</CODE>, assuming
<CODE>java</CODE> is in your <CODE>PATH</CODE>.
</OL>

<P>
If you use an integrated Java development environment, you should be
able to import all the Java source files, and have it compile all of them.
You then need to compile the builtin Scheme procedures:

<PRE>
cd kawa\lib
%KAWA% -d ..\.. -P kawa.lib. -C *.scm
</PRE>

<P><HR><P>
Go to the <A HREF="kawa_1.html">first</A>, <A HREF="kawa_3.html">previous</A>, <A HREF="kawa_5.html">next</A>, <A HREF="kawa_15.html">last</A> section, <A HREF="kawa_toc.html">table of contents</A>.
</BODY>
</HTML>
