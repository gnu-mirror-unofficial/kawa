<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on October, 12  2001 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Kawa, the Java-based Scheme system: Running</TITLE>

<META NAME="description" CONTENT="Kawa, the Java-based Scheme system: Running">
<META NAME="keywords" CONTENT="Kawa, the Java-based Scheme system: Running">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC11"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_4.html#SEC10"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC12"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_4.html#SEC4"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_17.html#SEC83">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 4. How to start up and run Kawa </H1>
<!--docid::SEC11::-->
<P>

The easiest way to start up Kawa is to run the <SAMP>`kawa'</SAMP> program.
This finds your java interpreter, and sets up <SAMP>`CLASSPATH'</SAMP> correctly.
If you have installed Kawa such <CODE>$PREFIX/bin</CODE> is in your <CODE>$PATH</CODE>,
just do:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>kawa
</pre></td></tr></table>However, <SAMP>`kawa'</SAMP> only works if you have a Unix-like environment.
On some platforms, <SAMP>`kawa'</SAMP> is a program that uses the GNU
<SAMP>`readline'</SAMP> library to provide input line editing.
</P><P>

To run Kawa manually, you must start a Java interpreter.
How you do this depends on the Java interpreter.
For JavaSoft's JDK, you must have the Java interpreter
in your <CODE>PATH</CODE>.
You must also make sure that the <CODE>kawa/repl.class</CODE> file,
the rest of the Kawa packages, and the standard Java
packages can be found by searching CLASSPATH.
See section <A HREF="kawa_4.html#SEC5">3.1 Getting and running Java</A>.
</P><P>

Then you do:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>java kawa.repl
</pre></td></tr></table></P><P>

In either case, you will then get the <SAMP>`#|kawa:1|#'</SAMP> prompt,
which means you are
in the Kawa read-eval-print-loop.  If you type a Scheme
expression, Kawa will evaluate it.  Kawa will then print the
result (if there is a non-"void" result).
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="kawa_5.html#SEC12">4.1 Command-line arguments</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="kawa_5.html#SEC13">4.2 Running a Command Interpreter in a new Window</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="kawa_5.html#SEC14">4.3 Exiting Kawa</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Options"></A>
<HR SIZE="6">
<A NAME="SEC12"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC13"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_17.html#SEC83">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.1 Command-line arguments </H2>
<!--docid::SEC12::-->
<P>

<A NAME="IDX1"></A>
You can pass various flags to Kawa, for example:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>kawa -e '(display (+ 12 4))(newline)'
</pre></td></tr></table>or:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>java kawa.repl -e '(display (+ 12 4))(newline)'
</pre></td></tr></table>Either causes Kawa to print <SAMP>`16'</SAMP>, and then exit.
</P><P>

At startup, Kawa executes an init file from the user's home
directory.
The init file is named <CODE>.kawarc.scm</CODE> on Unix-like systems
(those for which the file separator is <CODE>'/'</CODE>),
and <CODE>kawarc.scm</CODE> on other systems.
This is done before the read-eval-print loop
or before the first <CODE>-f</CODE> or <CODE>-c</CODE> argument.  (It is not run
for a <CODE>-e</CODE> command, to allow you to set options to override
the defaults.)
</P><P>

<DL COMPACT>
<DT><SAMP>`-e <VAR>expr</VAR>'</SAMP>
<DD>Kawa evaluates <VAR>expr</VAR>, which contains one or more Scheme expressions.
Does not cause the <CODE>~/.kawarc.scm</CODE> init file to be run.
<DT><SAMP>`-c <VAR>expr</VAR>'</SAMP>
<DD>Same as <SAMP>`-e <VAR>expr</VAR>'</SAMP>, except that it
does cause the <CODE>~/.kawarc.scm</CODE> init file to be run.
<DT><SAMP>`-f <VAR>filename</VAR>'</SAMP>
<DD>Kawa reads and evaluates expressions from the file named by <VAR>filename</VAR>.
If <VAR>filename</VAR> is <SAMP>`-'</SAMP>, standard input is read (with no prompting).
Otherwise, is equivalent to evaluating <SAMP>`(load "<VAR>filename</VAR>")'</SAMP>.
<DT><SAMP>`-s'</SAMP>
<DD><DT><SAMP>`--'</SAMP>
<DD>The global variable <SAMP>`command-line-arguments'</SAMP> is set to the remaining
arguments (if any), and an interactive read-eval-print loop is started.
This uses the same "console" as where you started up Kawa;
use <SAMP>`-w'</SAMP> to get a new window.
<DT><SAMP>`-w'</SAMP>
<DD>Creates a new top-level window, and runs an interactive read-eval-print
in the new window.  See <A HREF="kawa_5.html#SEC13">4.2 Running a Command Interpreter in a new Window</A>.
Same as <CODE>-e (scheme-window #t)</CODE>.
You can specify multiple <SAMP>`-w'</SAMP> options, and also use <SAMP>`-s'</SAMP>.
<DT><SAMP>`--help'</SAMP>
<DD>Prints out some help.
<DT><SAMP>`--version'</SAMP>
<DD>Prints out the Kawa version number, and then exits.
<DT><SAMP>`--server <VAR>portnum</VAR>'</SAMP>
<DD>Start a server listening from connections on the specified <VAR>portnum</VAR>.
Each connection using the Telnet protocol causes a new read-eval-print-loop
to started.  This option allows you to connect using any
Telnet client program to a remote "Kawa server".
<DT><SAMP>`--scheme'</SAMP>
<DD>Set the default language to Scheme.
(This is the default unless you select another language.)
<DT><SAMP>`--elisp'</SAMP>
<DD><DT><SAMP>`--emacs'</SAMP>
<DD><DT><SAMP>`--emacs-lisp'</SAMP>
<DD>Set the default language to Emacs Lisp.
(The implementation is quite incomplete.)
<DT><SAMP>`--lisp'</SAMP>
<DD><DT><SAMP>`--clisp'</SAMP>
<DD><DT><SAMP>`--clisp'</SAMP>
<DD><DT><SAMP>`--commonlisp'</SAMP>
<DD><DT><SAMP>`--common-lisp'</SAMP>
<DD>Set the default language to CommonLisp.
(The implementation is <EM>very</EM> incomplete.)
<DT><SAMP>`--xquery'</SAMP>
<DD>Set the default language to the draft XML Query language.
See the <A HREF="http://www.gnu.org/software/kawa/xquery/">Kawa-XQuery page</A>
for more information.
</DL>
<P>

The following options control which calling conventions are used:
<DL COMPACT>
<DT><SAMP>`--full-tailcalls'</SAMP>
<DD>Use a calling convention that supports proper tail recursion.
<DT><SAMP>`--no-full-tailcalls'</SAMP>
<DD>Use a calling convention that does not support proper tail recursion.
Self-tail-recursion (i.e. a recursive call to the current function)
is still implemented correctly, assuming that the called function
is known at compile time.
</DL>
<P>

The default is currently <CODE>--no-full-tailcalls</CODE> because I believe it is
faster (though I have not done any measurements yet).
It is also closer to the Java call model, so may be better for people
primarily interested in using Kawa for scripting Java systems.
</P><P>

Both calling conventions can co-exist:  Code compiled
with <CODE>--full-tailcalls</CODE> can call code compiled
with <CODE>--no-full-tailcalls</CODE> and vice versa.
</P><P>

The options <SAMP>`-C'</SAMP>, <SAMP>`-d'</SAMP>, <SAMP>`-T'</SAMP>, <SAMP>`-P'</SAMP>, <SAMP>`--main'</SAMP>
<SAMP>`--applet'</SAMP>, and <CODE>--servlet</CODE> are used to compile a Scheme file;
see <A HREF="kawa_7.html#SEC18">6.2 Compiling Scheme to a set of .class files</A>.
The option <SAMP>`--connect <VAR>portnum</VAR>'</SAMP> is only used by
the <SAMP>`kawa'</SAMP> front-end program.
</P><P>

The following options are useful if you want to debug or understand
how Kawa works.
<DL COMPACT>
<DT><SAMP>`--debug-dump-zip'</SAMP>
<DD>Normally, when Kawa loads a soyrce file, or evaluates a non-trivial expression,
it generates new internal Java classes but does not write them out.  This
option asks it to write out generated classes in a <SAMP>`.zip'</SAMP> archive
whose name has the prefix <SAMP>`kawa-zip-dump-'</SAMP>.
<DT><SAMP>`--debug-print-expr'</SAMP>
<DD>Kawa translates source language forms into an internal <CODE>Expression</CODE>
data structure.  This option causes that data structure to be written out
in a readable format to the standard output.
<DT><SAMP>`--debug-print-final-expr'</SAMP>
<DD>Similar to the previous option, but prints out the <CODE>Expression</CODE> after
various transformations and optimizations have been done, and just before
code generation.
</DL>
<P>

If there are further command-line arguments after the options
have been processed, then the first remaining argument names a
file that is read and evaluated.  If there is no such argument,
then Kawa enters an interactive read-eval-print loop,
but only if none of the <SAMP>`-c'</SAMP>, <SAMP>`-e'</SAMP>, <SAMP>`-f'</SAMP>, <SAMP>`-s'</SAMP>,
<SAMP>`-C'</SAMP>, or <SAMP>`--'</SAMP> options were specified.
</P><P>

<A NAME="New-Window"></A>
<HR SIZE="6">
<A NAME="SEC13"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC12"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC14"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_17.html#SEC83">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.2 Running a Command Interpreter in a new Window </H2>
<!--docid::SEC13::-->
<P>

An alternative interface runs the Java read-eval-print-loop
inside a new window. This is in some ways nicer.  One reason
is that it provides better editing.  You can also create
new windows.  They can either have different top-level
environments or they can share environments.  To try it, do:
<TABLE><tr><td>&nbsp;</td><td class=example><pre>java kawa.repl -w
</pre></td></tr></table></P><P>

<A NAME="Exiting"></A>
<HR SIZE="6">
<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_17.html#SEC83">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 4.3 Exiting Kawa </H2>
<!--docid::SEC14::-->
Kawa normally keeps running as long as there is an active
read-eval-print loop still awaiting input or there is an unfinished
other computation (such as requested by a <SAMP>`-e'</SAMP> of <SAMP>`-f'</SAMP> option).
<P>

To close a read-eval-print-loop, you can type the special
literal <CODE>#!eof</CODE> at top level.  This is recognized as end-of-file.
Unfortunately, due to thread-related complications, just typing
an end-of-file character (normally ctrl/D until Unix), will not work.
</P><P>

If the read-eval-print-loop
is in a new window, you can select <SAMP>`Close'</SAMP> from the <SAMP>`File'</SAMP> menu.
</P><P>

To exit the entire Kawa session, call the
<CODE>exit</CODE> procedure (with 0 or 1 integer arguments).
</P><P>

<A NAME="Restrictions"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_5.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_6.html#SEC15"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_17.html#SEC83">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="kawa_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Per Bothner</I> on <I>October, 12  2001</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
